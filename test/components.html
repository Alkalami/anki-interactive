<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>components' functionality</title>
    <link rel="stylesheet" href="../src/style.css">
    <script src="../src/utils.js"></script>
    <script src="../src/component.js"></script>
    <script src="../src/q-clozen.js"></script>
    <script src="../src/q-input.js"></script>
    <script src="../src/q-chips.js"></script>
    <script src="../src/q-choices.js"></script>
</head>
<body>

<div class="text">
    <p is="q-clozen">
        Anki is a program which makes remembering things easy.
        Because it is a lot more efficient than traditional study methods,
        you can either greatly <span class="cloze">[...]</span> your time spent <span class="cloze">[~study]</span>,
        or greatly <span class="cloze">[...]</span> the amount you <span class="cloze">[learn]</span>.
    </p>
</div>

<q-input></q-input>

<q-chips removable items="decrease|increase|learning|studying"></q-chips>

<q-choices type="radio" items="active recall|active repetition|spaced repetition|spaced recall"></q-choices>

</body>

<script>
    let clozen = Component.inst('q-clozen');
    clozen.on('qSelect', function (ev) {
        console.debug("cloze selected:", ev.detail);
        let cloze = ev.detail.cloze;
        if (cloze.value) {
            input.value = cloze.value;
        } else if (cloze.editable) {
            input.value = cloze.hint;
        } else {
            input.value = "";
        }
        input.focus();
    });

    let input = Component.inst('q-input');
    input.on('qChange', function (ev) {
        console.debug("input changed: '" + ev.detail.value + "'");
        if (clozen.selected) {
            clozen.update(clozen.selected, ev.detail.value);
        }
    });
    input.on('qSubmit', function (ev) {
        console.debug("input submitted");
    });

//    let chips = Component.inst('q-chips');
//    chips.show(0);
//    chips.on('qSelect', function (ev) {
//        console.debug("chip selected:", ev.detail);
//        if (clozen.selected) {
//            clozen.update(clozen.selected, ev.detail.value);
//        }
//        input.value = ev.detail.value;
//        input.show();
//    });
//    chips.on('qRemove', function (ev) {
//        console.debug("chip removed:", ev.detail);
//    });
//    chips.on('qFocus', function (ev) {
//        console.debug("chip focused:", ev.detail);
//    });
//    chips.on('qBlur', function (ev) {
//        console.debug("chips blured:", ev.detail);
//        input.show();
//    });

    let choices = Component.inst('q-choices');
    choices.on('qChange', function (ev) {
        console.debug("choice changed:", ev.detail);
    });
    choices.on('qFocus', function (ev) {
        console.debug("choice focused:", ev.detail);
    });
</script>
</html>